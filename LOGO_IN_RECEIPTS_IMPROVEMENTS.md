# ุชุญุณููุงุช ูุธุงู ุงูุดุนุงุฑ ูู ุงูุณูุฏุงุช

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุณูู ูุธุงู ุงูุดุนุงุฑ ูู ุงูุณูุฏุงุช ูุญู ุงููุดุงูู ุงูุชุงููุฉ:
- ุชุฑุงูู ูููุงุช ุงูุดุนุงุฑ ูู ุฐุงูุฑุฉ ุงููุงุด
- ุนุฏู ุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉ ุจุงูุดุนุงุฑ ุงูุฌุฏูุฏ ุชููุงุฆูุงู
- ุนุฏู ูุถูุญ ููููุฉ ุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉ

## ุงูุชุญุณููุงุช ุงููููุฐุฉ

### 1. ุชุญุณูู ุขููุฉ ุงููุงุด (Cache Management)

**ุงูููู**: `utils/logoHelper.ts`

#### ุงูุชุบููุฑุงุช:
- **ุฃุณูุงุก ุซุงุจุชุฉ ูููุงุด**: ุงุณุชุจุฏุงู `logo_${Date.now()}.png` ุจุฃุณูุงุก ุซุงุจุชุฉ:
  - `receipt_logo_cache.png` - ููุดุนุงุฑ ุงููุณุชุฎุฏู ูู ุงูุณูุฏุงุช
  - `shop_logo_cache.png` - ููุดุนุงุฑ ุงููุณุชุฎุฏู ูู ุงูุชุทุจูู

- **ุฏุงูุฉ ุชูุธูู ุงููุงุด**: ุฅุถุงูุฉ ุฏุงูุฉ `clearLogoCache()` ูุญุฐู ูููุงุช ุงูุดุนุงุฑ ุงููุฏููุฉ

- **ุงุณุชุฎุฏุงู ุงููุงุด ุงูุฐูู**:
  - ุนูุฏ ุชุญููู ุงูุดุนุงุฑุ ูุชุญูู ุงููุธุงู ูู ูุฌูุฏ ูุณุฎุฉ ูู ุงููุงุด
  - ุฅุฐุง ููุฌุฏุชุ ูุชู ุงุณุชุฎุฏุงููุง ูุจุงุดุฑุฉ ุฏูู ุชุญููู ูู ุงูุฎุงุฏู
  - ุฅุฐุง ูู ุชูุฌุฏุ ูุชู ุงูุชุญููู ูุญูุธูุง ูู ุงููุงุด

```typescript
// ูุซุงู ุนูู ุงูุงุณุชุฎุฏุงู
const logo = await getReceiptLogoBase64(); // ูุณุชุฎุฏู ุงููุงุด ุฅุฐุง ูุงู ูุชุงุญุงู
const freshLogo = await getReceiptLogoBase64(true); // ูุฌุจุฑ ุฅุนุงุฏุฉ ุงูุชุญููู
```

### 2. ูุนุงูู Force Refresh

ุชู ุฅุถุงูุฉ ูุนุงูู `forceRefresh` ููุฏูุงู ุงูุชุงููุฉ:
- `getLogoBase64(forceRefresh?: boolean)`
- `getReceiptLogoBase64(forceRefresh?: boolean)`
- `convertUrlToBase64(url, cacheFileName, forceRefresh?: boolean)`

#### ููู ูุนูู:
- ุนูุฏ `forceRefresh = false` (ุงูุงูุชุฑุงุถู): ูุณุชุฎุฏู ุงููุงุด ุฅุฐุง ูุงู ููุฌูุฏุงู
- ุนูุฏ `forceRefresh = true`: ูุญุฐู ุงููุงุด ููุญูู ุงูุดุนุงุฑ ูู ุฌุฏูุฏ

### 3. ุฒุฑ "ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุณูุฏ"

**ุงูููู**: `app/receipt-preview.tsx`

ุชู ุฅุถุงูุฉ ุฒุฑ ุฌุฏูุฏ ูู ุตูุญุฉ ูุนุงููุฉ ุงูุณูุฏ ูุณูุญ ุจุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุณูุฏ ุจุงูุดุนุงุฑ ุงูุญุงูู.

#### ุงูููุฒุงุช:
- **ุฃููููุฉ ูุงุถุญุฉ**: ุฒุฑ ูุน ุฃููููุฉ ๐ ุจููู ุฃุฎุถุฑ
- **ุชุฃููุฏ ูุจู ุงูุฅุฌุฑุงุก**: ุฑุณุงูุฉ ุชุฃููุฏ ูุจู ุฅุนุงุฏุฉ ุงูุฅูุดุงุก
- **ุชุญุฏูุซ ุชููุงุฆู**: ูุนูุฏ ุฅูุดุงุก ุงูุณูุฏ ุจุงูุดุนุงุฑ ุงูุฃุญุฏุซ
- **ูุคุดุฑ ุงูุชุญููู**: ุนุฑุถ ูุคุดุฑ ุชุญููู ุฃุซูุงุก ุงูุนูููุฉ

#### ููููุฉ ุงูุงุณุชุฎุฏุงู:
1. ุงูุชุญ ุตูุญุฉ ูุนุงููุฉ ุงูุณูุฏ
2. ุงุถุบุท ุนูู ุฒุฑ ๐ ูู ุงูุฒุงููุฉ ุงูุนูููุฉ
3. ุฃูุฏ ุฑุบุจุชู ูู ุฅุนุงุฏุฉ ุงูุฅูุดุงุก
4. ุงูุชุธุฑ ุญุชู ูุชู ุฅูุดุงุก ุงูุณูุฏ ุงูุฌุฏูุฏ

### 4. ุฅุดุนุงุฑุงุช ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช

**ุงูููู**: `app/shop-settings.tsx`

ุนูุฏ ุญูุธ ุดุนุงุฑ ุฌุฏูุฏุ ูุธูุฑ ุฅุดุนุงุฑ ูุงุถุญ ููุถุญ:
- ูุฌุงุญ ุญูุธ ุงูุดุนุงุฑ ุงูุฌุฏูุฏ
- ุฃู ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ
- ููููุฉ ุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉ (ุงุณุชุฎุฏุงู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅูุดุงุก)

#### ูุต ุงูุฅุดุนุงุฑ:
```
ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูุงูุดุนุงุฑ ุจูุฌุงุญ

ููุงุญุธุฉ: ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ.

ูุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉุ ุงูุชุญ ูู ุณูุฏ ูุงุถุบุท ุนูู ุฒุฑ "ุฅุนุงุฏุฉ ุงูุฅูุดุงุก" ๐
```

#### ุชูุธูู ุงููุงุด ุงูุชููุงุฆู:
ุนูุฏ ุญูุธ ุดุนุงุฑ ุฌุฏูุฏุ ูุชู ุชููุงุฆูุงู:
1. ุญุฐู ูููุงุช ุงูุดุนุงุฑ ุงููุฏููุฉ ูู ุงููุงุด
2. ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฅุนุงุฏุฉ ุชุญููู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ

## ุงูููุงุฆุฏ

### 1. ุชุญุณูู ุงูุฃุฏุงุก
- ุนุฏู ุฅุนุงุฏุฉ ุชุญููู ุงูุดุนุงุฑ ูู ูู ูุฑุฉ
- ุงุณุชุฎุฏุงู ุงููุงุด ูุชุณุฑูุน ุนุฑุถ ุงูุณูุฏุงุช
- ุชูููู ุงุณุชููุงู ุงูุจูุงูุงุช

### 2. ุฅุฏุงุฑุฉ ุฃูุถู ููุฐุงูุฑุฉ
- ุนุฏู ุชุฑุงูู ูููุงุช ุงูุดุนุงุฑ
- ุชูุธูู ุชููุงุฆู ุนูุฏ ุงูุชุญุฏูุซ
- ุงุณุชุฎุฏุงู ุฃุณูุงุก ุซุงุจุชุฉ ูุณูู ุงูุชุชุจุน

### 3. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู
- ูุถูุญ ูู ููููุฉ ุชุญุฏูุซ ุงูุณูุฏุงุช
- ุฒุฑ ูุงุถุญ ูุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุณูุฏ
- ุฅุดุนุงุฑุงุช ูููุฏุฉ ููุจุงุดุฑุฉ

## ุงุณุชุฎุฏุงู ุงููุธุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู

#### ุชุบููุฑ ุงูุดุนุงุฑ:
1. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** > **ุฅุนุฏุงุฏุงุช ุงููุญู**
2. ุงุฎุชุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ ููุดุนุงุฑ
3. ุงุญูุธ ุงูุชุบููุฑุงุช
4. ุณุชุธูุฑ ุฑุณุงูุฉ ุชูุถุญ ุฃู ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ

#### ุชุญุฏูุซ ุณูุฏ ูุฏูู:
1. ุงูุชุญ ุงูุณูุฏ ูู ูุงุฆูุฉ ุงูุญุฑูุงุช
2. ุงุถุบุท ุนูู ุฒุฑ ๐ (ุฅุนุงุฏุฉ ุงูุฅูุดุงุก) ูู ุงูุฃุนูู
3. ุฃูุฏ ุฑุบุจุชู ูู ุฅุนุงุฏุฉ ุงูุฅูุดุงุก
4. ุณูุชู ุฅูุดุงุก ุงูุณูุฏ ุจุงูุดุนุงุฑ ุงูุฌุฏูุฏ

### ูููุทูุฑ

#### ุงุณุชุฎุฏุงู ุฏุงูุฉ getReceiptLogoBase64:
```typescript
// ุชุญููู ุงูุดุนุงุฑ ูู ุงููุงุด ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช
const logo = await getReceiptLogoBase64();

// ูุฑุถ ุฅุนุงุฏุฉ ุงูุชุญููู ูู ุงูุฎุงุฏู
const freshLogo = await getReceiptLogoBase64(true);
```

#### ุชูุธูู ุงููุงุด ูุฏููุงู:
```typescript
import { clearLogoCache } from '@/utils/logoHelper';

// ุญุฐู ุฌููุน ูููุงุช ุงูุดุนุงุฑ ูู ุงููุงุด
await clearLogoCache();
```

#### ูู ุฏุงูุฉ generateReceipt:
```typescript
const generateReceipt = async (movementData: any, forceRefresh = false) => {
  // ุชุญููู ุงูุดุนุงุฑ ูุน ุฅููุงููุฉ ูุฑุถ ุงูุชุญุฏูุซ
  const logoDataUrl = await getReceiptLogoBase64(forceRefresh);

  // ุฅูุดุงุก ุงูุณูุฏ...
};
```

## ุงููููุงุช ุงููุนุฏูุฉ

1. **utils/logoHelper.ts**
   - ุฅุถุงูุฉ ุซูุงุจุช ุฃุณูุงุก ุงููุงุด
   - ุฅุถุงูุฉ ุฏุงูุฉ `clearLogoCache()`
   - ุชุญุฏูุซ `convertUrlToBase64()` ูุฏุนู ุงููุงุด
   - ุฅุถุงูุฉ ูุนุงูู `forceRefresh`

2. **app/receipt-preview.tsx**
   - ุฅุถุงูุฉ state `isRefreshing`
   - ุชุญุฏูุซ `generateReceipt()` ูุฏุนู `forceRefresh`
   - ุฅุถุงูุฉ ุฏุงูุฉ `handleRefresh()`
   - ุฅุถุงูุฉ ุฒุฑ ูู ุงููุงุฌูุฉ

3. **app/shop-settings.tsx**
   - ุงุณุชูุฑุงุฏ `clearLogoCache`
   - ุชุญุฏูุซ `handleSave()` ูุชูุธูู ุงููุงุด
   - ุชุญุณูู ุฑุณุงุฆู ุงููุฌุงุญ

## ููุงุญุธุงุช ูููุฉ

### ููุณูุฏุงุช ุงูููุฌูุฏุฉ:
- ุงูุณูุฏุงุช ุงููุญููุธุฉ ูู PDF ูู ุชุชุบูุฑ ุชููุงุฆูุงู
- ูุฌุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ูู ุณูุฏ ูุฏููุงู ุจุงุณุชุฎุฏุงู ุฒุฑ ๐
- ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ ูุจุงุดุฑุฉ

### ููุฃุฏุงุก:
- ุงููุงุด ูุนูู ููุท ุนูู ุฃุฌูุฒุฉ Android ู iOS
- ุนูู ุงูููุจุ ูุชู ุงุณุชุฎุฏุงู ุงูุฑุงุจุท ุงููุจุงุดุฑ ููุตูุฑุฉ
- ุชูุธูู ุงููุงุด ูุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุชุบููุฑ ุงูุดุนุงุฑ

### ููุตูุงูุฉ:
- ุฅุฐุง ูุงุฌูุช ูุดููุฉ ูู ุงูุดุนุงุฑุ ุฌุฑุจ ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุณูุฏ
- ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ูููู ุญุฐู ุงููุงุด ูุฏููุงู ูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
- ุงูุดุนุงุฑ ุงูุงูุชุฑุงุถู ุณููุณุชุฎุฏู ูู ุญุงูุฉ ูุดู ุชุญููู ุงูุดุนุงุฑ ุงููุฎุตุต

## ุงูุงุฎุชุจุงุฑุงุช ุงูููุตู ุจูุง

### ุงุฎุชุจุงุฑ ุชุบููุฑ ุงูุดุนุงุฑ:
1. ูู ุจุชุบููุฑ ุงูุดุนุงุฑ ูู ุงูุฅุนุฏุงุฏุงุช
2. ุชุญูู ูู ุธููุฑ ุงูุฅุดุนุงุฑ ุงูุตุญูุญ
3. ุฃูุดุฆ ุณูุฏ ุฌุฏูุฏ ูุชุญูู ูู ุงูุดุนุงุฑ
4. ุงูุชุญ ุณูุฏ ูุฏูู ูุชุญูู ูู ุจูุงุก ุงูุดุนุงุฑ ุงููุฏูู
5. ุงุณุชุฎุฏู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅูุดุงุก ูุชุญูู ูู ุชุญุฏูุซ ุงูุดุนุงุฑ

### ุงุฎุชุจุงุฑ ุงููุงุด:
1. ุญููู ุณูุฏ ูุน ุงูุดุนุงุฑ (ุณููุฎุฒู ูู ุงููุงุด)
2. ุงูุตู ุงูุฅูุชุฑูุช
3. ุญุงูู ุชุญููู ุงูุณูุฏ ูุฑุฉ ุฃุฎุฑู (ูุฌุจ ุฃู ูุนูู ูู ุงููุงุด)
4. ุฃุนุฏ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
5. ุงุณุชุฎุฏู forceRefresh ูุชุญูู ูู ุฅุนุงุฏุฉ ุงูุชุญููู

### ุงุฎุชุจุงุฑ ุนูู ููุตุงุช ูุฎุชููุฉ:
- Android: ุชุญูู ูู ุนูู ุงููุงุด ูุงูุชุญุฏูุซ
- iOS: ุชุญูู ูู ุนูู ุงููุงุด ูุงูุชุญุฏูุซ
- Web: ุชุญูู ูู ุนุฑุถ ุงูุดุนุงุฑ ูุจุงุดุฑุฉ (ุจุฏูู ูุงุด)

## ุงููุดุงูู ุงููุนุฑููุฉ ูุงูุญููู

### ุงููุดููุฉ: ุงูุดุนุงุฑ ูุง ูุชุญุฏุซ ูู ุณูุฏ ูุฏูู
**ุงูุญู**: ุงุณุชุฎุฏู ุฒุฑ ุฅุนุงุฏุฉ ุงูุฅูุดุงุก ๐ ูู ุตูุญุฉ ูุนุงููุฉ ุงูุณูุฏ

### ุงููุดููุฉ: ุงูุดุนุงุฑ ูุธูุฑ ุจุญุฌู ุฎุงุทุฆ
**ุงูุญู**: ุชุฃูุฏ ูู ุฃู ุงูุตูุฑุฉ ุจุตูุบุฉ PNG ูุจุญุฌู ููุงุณุจ (ูููุถู 512x512 ุจูุณู)

### ุงููุดููุฉ: ุงูุดุนุงุฑ ูุง ูุธูุฑ ุนูู ุงูุฅุทูุงู
**ุงูุญู**:
1. ุชุญูู ูู ุฑูุน ุงูุตูุฑุฉ ุจูุฌุงุญ
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช Storage ูู Supabase
3. ุฌุฑุจ ุญุฐู ุงููุงุด ูุฅุนุงุฏุฉ ุงูุชุญููู

## ุงูุฎูุงุตุฉ

ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ ุชููุฑ:
- ุฅุฏุงุฑุฉ ุฃูุถู ููุฐุงูุฑุฉ ูุงููุงุด
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถุญ ูุฃุณูู
- ุฅููุงููุฉ ุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉ
- ุฃุฏุงุก ูุญุณูู ูุชูููู ุงุณุชููุงู ุงูุจูุงูุงุช

ุฌููุน ุงูุชุบููุฑุงุช ูุชูุงููุฉ ูุน ุงูููุฏ ุงูุณุงุจู ููุง ุชุคุซุฑ ุนูู ุงูุณูุฏุงุช ุงูููุฌูุฏุฉ.
