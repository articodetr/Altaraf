# ุฅุตูุงุญ ูุดุงูู ุฑูุน ุงูุดุนุงุฑ ูุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ

## ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. ูุดููุฉ "ุชู ุฑูุน ุงูุตูุฑุฉ ูููู ูุดู ุญูุธูุง ูู ุงูุฅุนุฏุงุฏุงุช"

#### ุงูุณุจุจ:
ูุงู ุงูููุฏ ูุญุงูู ุญูุธ ุงูุดุนุงุฑ ูุฑุชูู:
1. ูุฑุฉ ุนุจุฑ `updateShopLogo()` ูุจุงุดุฑุฉ ุจุนุฏ ุฑูุน ุงูุตูุฑุฉ
2. ูุฑุฉ ุฃุฎุฑู ุนุจุฑ `updateSettings()` ูุน ุจุงูู ุฅุนุฏุงุฏุงุช ุงููุญู

ูุฐุง ุงูุชูุฑุงุฑ ูุงู ูุณุจุจ ุชุนุงุฑุถุงู ููุดุงูู ูู ุงูุญูุธ.

#### ุงูุญู:
- **ุฅุฒุงูุฉ `updateShopLogo()` ูู ุนูููุฉ ุงูุญูุธ**: ุงูุขู ูุชู ุฑูุน ุงูุตูุฑุฉ ุฃููุงู ุฅูู Storageุ ุซู ุญูุธ ุงูุฑุงุจุท ูุน ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุงูุฃุฎุฑู ูู ุนูููุฉ ูุงุญุฏุฉ ุนุจุฑ `updateSettings()`.
- **ุชุจุณูุท ููุทู ุงูุญูุธ**: ุนูููุฉ ูุงุญุฏุฉ ููุท ูุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุจูุง ูู ุฐูู ุงูุดุนุงุฑ.
- **ุฅุถุงูุฉ ุชุณุฌูู ููุตู**: ุชู ุฅุถุงูุฉ console.log ูุชุชุจุน ูู ุฎุทูุฉ ูู ุฎุทูุงุช ุงูุฑูุน ูุงูุญูุธ.

#### ุงูููุฏ ุจุนุฏ ุงูุฅุตูุงุญ:
```typescript
// ูู app/shop-settings.tsx
if (selectedImageUri) {
  const result = await uploadLogo(selectedImageUri);
  if (result.success && result.url) {
    logoUrl = result.url;
    // ูุง ููุฌุฏ ุงุณุชุฏุนุงุก ูู updateShopLogo ููุง!
  }
}

// ุญูุธ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ูุฑุฉ ูุงุญุฏุฉ
const settingsUpdate = {
  shop_name: shopName,
  shop_logo: logoUrl, // ููุถุงู ููุท ุฅุฐุง ูุงู ููุงู ุดุนุงุฑ ุฌุฏูุฏ
  // ... ุจุงูู ุงูุฅุนุฏุงุฏุงุช
};

const success = await updateSettings(settingsUpdate);
```

### 2. ูุดููุฉ ุนุฏู ุธููุฑ ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ ูู ุงูุณูุฏุงุช

#### ุงูุณุจุจ:
ููู `assets/images/logo_1.png` ูุงู ุนุจุงุฑุฉ ุนู ููู ูููู (dummy file) ูููุณ ุตูุฑุฉ ุญููููุฉ. ุนูุฏ ูุญุงููุฉ ูุฑุงุกุชู ูุชุญูููู ุฅูู base64ุ ูุงู ููุดู.

#### ุงูุญู:
- **ุงุณุชุฎุฏุงู placeholder SVG ูุจุงุดุฑุฉ**: ุจุฏูุงู ูู ูุญุงููุฉ ูุฑุงุกุฉ ููู ูุฏ ูููู ุบูุฑ ููุฌูุฏ ุฃู ููููุ ุงูุขู ูุณุชุฎุฏู ุงููุธุงู placeholder SVG ูุญุฏุฏ ูุณุจูุงู ูู ุงูููุฏ.
- **ุชุจุณูุท ุฏุงูุฉ `getDefaultLogoBase64()`**: ุฃุตุจุญุช ุชูุฑุฌุน placeholder ูุจุงุดุฑุฉ ุจุฏูู ูุญุงููุฉ ูุฑุงุกุฉ ููู.

#### ุงูููุฏ ุจุนุฏ ุงูุฅุตูุงุญ:
```typescript
// ูู utils/logoHelper.ts
const DEFAULT_LOGO_PLACEHOLDER = 'data:image/svg+xml;base64,...';

async function getDefaultLogoBase64(): Promise<string> {
  try {
    console.log('[logoHelper] Using default placeholder logo');
    return DEFAULT_LOGO_PLACEHOLDER;
  } catch (error) {
    console.error('[logoHelper] Error loading default logo:', error);
    return DEFAULT_LOGO_PLACEHOLDER;
  }
}
```

## ุงูุชุญุณููุงุช ุงูุฅุถุงููุฉ

### 1. ุชุญุฏูุซ ููุน AppSettings
ุฃุถูู ุญูู `selected_receipt_logo` ุฅูู ูุงุฌูุฉ `AppSettings`:

```typescript
export interface AppSettings {
  id: string;
  shop_name: string;
  shop_logo?: string | null;
  shop_phone?: string | null;
  shop_address?: string | null;
  selected_receipt_logo?: string | null; // โ ุฌุฏูุฏ
  pin_code: string;
  updated_at: string;
}
```

### 2. ุฏุนู null ูู ุงูุฃููุงุน
ุชู ุชุญุฏูุซ ุฌููุน ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ ูุฏุนู `null` ุจุงูุฅุถุงูุฉ ุฅูู `undefined`:
- `shop_logo?: string | null`
- `shop_phone?: string | null`
- `shop_address?: string | null`
- `selected_receipt_logo?: string | null`

ูุฐุง ูุณูุญ ุจุญุฐู ุงูุดุนุงุฑ ุจุดูู ุตุฑูุญ ุนู ุทุฑูู ุชุนูููู ุฅูู `null`.

### 3. ุชุญุณูู ุฏุงูุฉ ุญุฐู ุงูุดุนุงุฑ
ุชู ุชุญุฏูุซ `handleRemoveLogo()` ูุงุณุชุฎุฏุงู `updateSettings()` ุจุฏูุงู ูู `updateShopLogo()`:

```typescript
const handleRemoveLogo = () => {
  Alert.alert('ุญุฐู ุงูุดุนุงุฑ', 'ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุงูุดุนุงุฑ ุงูุญุงููุ', [
    {
      text: 'ุญุฐู',
      style: 'destructive',
      onPress: async () => {
        const success = await updateSettings({ shop_logo: null });
        if (success) {
          await clearLogoCache();
          await loadCurrentLogo();
          Alert.alert('ูุฌุญ', 'ุชู ุญุฐู ุงูุดุนุงุฑ ุจูุฌุงุญ');
        }
      },
    },
  ]);
};
```

### 4. ุชุญุณูู ุชุณุฌูู ุงูุฃุญุฏุงุซ (Logging)
ุชูุช ุฅุถุงูุฉ ุชุณุฌูู ููุตู ูู:
- `app/shop-settings.tsx`: ูุชุชุจุน ุนูููุฉ ุฑูุน ูุญูุธ ุงูุดุนุงุฑ
- `contexts/AuthContext.tsx`: ูุชุชุจุน ุนูููุฉ ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
- `services/logoService.ts`: ูุชุชุจุน ุนูููุฉ ุญุฐู ุงูุดุนุงุฑ ุงููุฏูู

## ุงููููุงุช ุงููุนุฏูุฉ

1. **utils/logoHelper.ts**
   - ุชุจุณูุท `getDefaultLogoBase64()` ูุงุณุชุฎุฏุงู placeholder ูุจุงุดุฑุฉ
   - ุชุจุณูุท `getLogoUrl()` ูุงุณุชุฎุฏุงู placeholder ูุจุงุดุฑุฉ

2. **app/shop-settings.tsx**
   - ุฅุฒุงูุฉ ุงุณุชุฏุนุงุก `updateShopLogo()` ุจุนุฏ ุฑูุน ุงูุตูุฑุฉ
   - ุชุญุฏูุซ `handleRemoveLogo()` ูุงุณุชุฎุฏุงู `updateSettings()`
   - ุฅุถุงูุฉ ุชุณุฌูู ููุตู ููู ุฎุทูุฉ
   - ุฅุฒุงูุฉ ุงุณุชูุฑุงุฏ `updateShopLogo`

3. **contexts/AuthContext.tsx**
   - ุฅุถุงูุฉ ุชุณุฌูู ููุตู ูู `updateSettings()`

4. **services/logoService.ts**
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู `deleteLogo()`
   - ุฅุถุงูุฉ ูุญุต ููุชุฃูุฏ ูู ุตุญุฉ ุฑุงุจุท ุงูุดุนุงุฑ ูุจู ุงูุญุฐู

5. **types/database.ts**
   - ุฅุถุงูุฉ ุญูู `selected_receipt_logo` ุฅูู ูุงุฌูุฉ `AppSettings`
   - ุชุญุฏูุซ ุฌููุน ุงูุญููู ุงูุงุฎุชูุงุฑูุฉ ูุฏุนู `null`

## ููููุฉ ุงุณุชุฎุฏุงู ุงููุธุงู ุงูููุญุฏููุซ

### ูุฑูุน ุดุนุงุฑ ุฌุฏูุฏ:
1. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** > **ุฅุนุฏุงุฏุงุช ุงููุญู**
2. ุงุฎุชุฑ ุตูุฑุฉ ุฌุฏูุฏุฉ (ูู ุงููุนุฑุถ ุฃู ุงููุงููุฑุง ุฃู ููู PNG)
3. ุงููุฃ ุจุงูู ุงููุนูููุงุช (ุงุณู ุงููุญูุ ุงููุงุชูุ ุงูุนููุงู)
4. ุงุถุบุท ุนูู **ุญูุธ ุงูุชุบููุฑุงุช**
5. ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ ุชุคูุฏ ุญูุธ ุงูุดุนุงุฑ ูุงูุฅุนุฏุงุฏุงุช

### ูุญุฐู ุงูุดุนุงุฑ:
1. ุงุฐูุจ ุฅูู **ุงูุฅุนุฏุงุฏุงุช** > **ุฅุนุฏุงุฏุงุช ุงููุญู**
2. ุงุถุบุท ุนูู ุฒุฑ **ุญุฐู ุงูุดุนุงุฑ** ๐๏ธ
3. ุฃูุฏ ุงูุญุฐู
4. ุณูุชู ุงุณุชุฎุฏุงู ุงูุดุนุงุฑ ุงูุงูุชุฑุงุถู

### ููุงุญุธุฉ ูุงูุฉ:
- ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ ุณุชุณุชุฎุฏู ุงูุดุนุงุฑ ุงูุฌุฏูุฏ ุชููุงุฆูุงู
- ูุชุญุฏูุซ ุงูุณูุฏุงุช ุงููุฏููุฉุ ุงูุชุญ ูู ุณูุฏ ูุงุถุบุท ุนูู ุฒุฑ "ุฅุนุงุฏุฉ ุงูุฅูุดุงุก" ๐ (ููุง ุชู ุดุฑุญู ูู LOGO_IN_RECEIPTS_IMPROVEMENTS.md)

## ุงุฎุชุจุงุฑ ุงูุฅุตูุงุญุงุช

### ุงุฎุชุจุงุฑ ุฑูุน ุงูุดุนุงุฑ:
1. โ ุญุงูู ุฑูุน ุตูุฑุฉ ุฌุฏูุฏุฉ
2. โ ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ ุงููุฌุงุญ ุจุฏูู ุฃุฎุทุงุก
3. โ ุชุญูู ูู ุธููุฑ ุงูุดุนุงุฑ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
4. โ ุฃูุดุฆ ุณูุฏ ุฌุฏูุฏ ูุชุญูู ูู ุธููุฑ ุงูุดุนุงุฑ ููู

### ุงุฎุชุจุงุฑ ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ:
1. โ ุงุญุฐู ุงูุดุนุงุฑ (ุฅุฐุง ูุงู ููุฌูุฏุงู)
2. โ ุฃูุดุฆ ุณูุฏ ุฌุฏูุฏ
3. โ ุชุญูู ูู ุธููุฑ ุงูุดุนุงุฑ ุงูุงูุชุฑุงุถู (ูุฑุจุน ุฑูุงุฏู ูุน ูุต "Logo")

### ุงุฎุชุจุงุฑ ุญุฐู ุงูุดุนุงุฑ:
1. โ ุงุฑูุน ุดุนุงุฑุงู ุฌุฏูุฏุงู
2. โ ุงุญุฐู ุงูุดุนุงุฑ ุจุงุณุชุฎุฏุงู ุฒุฑ ุงูุญุฐู
3. โ ุชุญูู ูู ุงุฎุชูุงุก ุงูุดุนุงุฑ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
4. โ ุชุญูู ูู ุงุณุชุฎุฏุงู ุงูุดุนุงุฑ ุงูุงูุชุฑุงุถู ูู ุงูุณูุฏุงุช ุงูุฌุฏูุฏุฉ

## ุงูุฃุฎุทุงุก ุงููุญุชููุฉ ูุญููููุง

### ุงูุฎุทุฃ: "ูุดู ุฑูุน ุงูุดุนุงุฑ"
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- ุญุฌู ุงูููู ุฃูุจุฑ ูู 5 ููุฌุงุจุงูุช
- ููุน ุงูููู ุบูุฑ ูุฏุนูู (ููุท JPG ู PNG ูุฏุนูููู)
- ูุดููุฉ ูู ุงูุงุชุตุงู ุจู Supabase Storage

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุญุฌู ุงูุตูุฑุฉ ุฃูู ูู 5 ููุฌุงุจุงูุช
- ุงุณุชุฎุฏู ุตูุฑุฉ ุจุตูุบุฉ JPG ุฃู PNG
- ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

### ุงูุฎุทุฃ: "ูุดู ุญูุธ ุงูุฅุนุฏุงุฏุงุช"
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- ูุดููุฉ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุดููุฉ ูู ุตูุงุญูุงุช RLS

**ุงูุญู:**
- ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
- ุงูุญุต console logs ููุญุตูู ุนูู ูุฒูุฏ ูู ุงูุชูุงุตูู
- ุชุฃูุฏ ูู ุฃู ุฌุฏูู `app_settings` ูุฏูู ุงูุตูุงุญูุงุช ุงูุตุญูุญุฉ

### ุงูุดุนุงุฑ ูุง ูุธูุฑ ูู ุงูุณูุฏุงุช:
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- ุงููุงุด ูู ูุชู ุชุญุฏูุซู
- ูุดููุฉ ูู ุชุญููู ุงูุดุนุงุฑ ูู Storage

**ุงูุญู:**
- ุงูุชุญ ุงูุณูุฏ ูุงุถุบุท ุนูู ุฒุฑ "ุฅุนุงุฏุฉ ุงูุฅูุดุงุก" ๐
- ุญุงูู ุญุฐู ุงููุงุด ูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู (ุนูู Android/iOS)
- ุชุญูู ูู ุฃู ุฑุงุจุท ุงูุดุนุงุฑ ุตุญูุญ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ: ุงุณุชุฎุฏุงู ุตูุฑุฉ ุญููููุฉ ูู Assets

**ุงูุชุงุฑูุฎ**: 10 ููุงูุฑ 2026

### ูุงุฐุง ุชุบูุฑุ

ุชู ุชุญุฏูุซ ุงููุธุงู ููุณุชุฎุฏู ุตูุฑุฉ ุญููููุฉ ูู `assets/images/logo_1.png` ุจุฏูุงู ูู placeholder SVG ุฑูุงุฏู.

### ุงูุชุบููุฑุงุช:

1. **ุงุณุชุจุฏุงู ููู logo_1.png**:
   - ุชู ุงุณุชุจุฏุงู ุงูููู ุงููุตู ุงููููู ุจุตูุฑุฉ PNG ุญููููุฉ (1024x1024ุ 148KB)
   - ุงูุขู ุงูููู ูุญุชูู ุนูู ุตูุฑุฉ ุญููููุฉ ูููู ุนุฑุถูุง ูู ุงูุณูุฏุงุช

2. **ุชุญุฏูุซ ุฏุงูุฉ getDefaultLogoBase64**:
   ```typescript
   // ูุจู
   async function getDefaultLogoBase64(): Promise<string> {
     return DEFAULT_LOGO_PLACEHOLDER; // SVG ุฑูุงุฏู
   }

   // ุจุนุฏ
   async function getDefaultLogoBase64(): Promise<string> {
     const asset = Asset.fromModule(require('@/assets/images/logo_1.png'));
     await asset.downloadAsync();

     // ุนูู ุงูููุจ: ุฅุฑุฌุงุน URI ูุจุงุดุฑุฉ
     if (Platform.OS === 'web') {
       return asset.uri;
     }

     // ุนูู ุงูููุจุงูู: ุชุญููู ุฅูู base64
     const base64 = await FileSystem.readAsStringAsync(asset.localUri || asset.uri);
     return `data:image/png;base64,${base64}`;
   }
   ```

3. **ุงูููุงุฆุฏ**:
   - โ ุดุนุงุฑ ุงุญุชุฑุงูู ุจุฏูุงู ูู placeholder ุฑูุงุฏู
   - โ ุณูููุฉ ุงูุชุฎุตูุต (ููุท ุงุณุชุจุฏุงู ููู PNG)
   - โ ูุนูู ุนูู ุฌููุน ุงูููุตุงุช (Web, Android, iOS)
   - โ ุฃุฏุงุก ุฌูุฏ ูุน ุฏุนู ุงููุงุด

### ููููุฉ ุชุฎุตูุต ุงูุดุนุงุฑ ุงูุงูุชุฑุงุถู:

ูุชุบููุฑ ุงูุดุนุงุฑ ุงูุฐู ูุธูุฑ ูู ุงูุณูุฏุงุช ุนูุฏ ุนุฏู ุฑูุน ุดุนุงุฑ ูุฎุตุต:

1. ุงุณุชุจุฏู ููู `assets/images/logo_1.png` ุจุดุนุงุฑู ุงูุฎุงุต
2. ุชุฃูุฏ ูู ุฃู ุงูุตูุฑุฉ ุจุตูุบุฉ PNG
3. ุฃุนุฏ ุจูุงุก ุงูุชุทุจูู: `npm run build:web`

**ููุงุญุธุฉ**: ุฑุงุฌุน ููู `DEFAULT_LOGO_SYSTEM.md` ููุชูุงุตูู ุงููุงููุฉ.

---

## ุงูุฎูุงุตุฉ

ุชู ุญู ุฌููุน ุงููุดุงูู:

1. โ **ูุดููุฉ ุฑูุน ุงูุดุนุงุฑ**: ุชู ุชุจุณูุท ุนูููุฉ ุงูุญูุธ ูุชุชู ูู ุฎุทูุฉ ูุงุญุฏุฉ
2. โ **ูุดููุฉ ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถูุฉ**: ุชู ุงุณุชุฎุฏุงู ุตูุฑุฉ ุญููููุฉ ูู assets ุจุฏูุงู ูู placeholder SVG
3. โ **ูุธุงู ูุชูุงูู**: ุดุนุงุฑ ุงูุชุฑุงุถู ุงุญุชุฑุงูู + ุฅููุงููุฉ ุฑูุน ุดุนุงุฑ ูุฎุตุต

ุงููุธุงู ุงูุขู ุฃูุซุฑ ุงุณุชูุฑุงุฑุงู ูููุซูููุฉุ ูุน ุชุณุฌูู ููุตู ูุชุณููู ุชุชุจุน ุงููุดุงูู ุงููุณุชูุจููุฉ.
