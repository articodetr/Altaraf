# Quick Add Movement Feature

## Overview
تم تبسيط عملية إضافة الحركات المالية من صفحة العميل باستخدام Bottom Sheet سريع وبسيط.

## Features

### 1. إضافة سريعة (Quick Add)
- يفتح Bottom Sheet عند الضغط على زر "+" في صفحة العميل
- لا حاجة للانتقال إلى صفحة كاملة
- الحقول الأساسية فقط لأقصى سرعة

### 2. الحقول المتاحة

#### حقول أساسية (مطلوبة):
- **نوع الحركة**: زرين كبيرين واضحين
  - استلام من العميل (قبض) - يخصم من رصيد العميل
  - تسليم للعميل (صرف) - يضيف على رصيد العميل
- **المبلغ**: حقل رقمي كبير مع اختيار العملة
- **العملة**: اختيار من قائمة العملات المتاحة

#### حقول اختيارية:
- **عمولة**: مخفية افتراضياً، يمكن إظهارها بالضغط على "إضافة عمولة"
- **ملاحظة**: حقل نصي بسيط

### 3. معاينة الأثر
قبل الحفظ، يعرض النظام:
- الرصيد قبل العملية
- الرصيد بعد العملية
- توضيح المعنى:
  - موجب: لنا عند العميل
  - سالب: للعميل عندنا

### 4. خيارات الحفظ
- **حفظ**: يحفظ الحركة ويغلق النافذة مباشرة
- **حفظ + طباعة**: يحفظ الحركة ويفتح صفحة معاينة السند للطباعة

### 5. الذكاء في الإدخال
- يتذكر النظام آخر عملة استخدمها المستخدم
- يتم إكمال اسم المرسل والمستفيد تلقائياً حسب نوع الحركة

## منطق الحساب

### رصيد العميل = "لنا عنده"

#### عند تسليم للعميل (صرف):
```
balance_after = balance_before + amount
```
مثال: إذا كان الرصيد 1000$، وسلمنا للعميل 500$:
- الرصيد الجديد = 1500$ (لنا عنده زاد)

#### عند استلام من العميل (قبض):
```
balance_after = balance_before - amount
```
مثال: إذا كان الرصيد 1000$، واستلمنا من العميل 500$:
- الرصيد الجديد = 500$ (لنا عنده نقص)

## User Experience

### السرعة
- يمكن إضافة حركة في أقل من 10 ثواني
- 3 نقرات فقط: نوع الحركة → إدخال المبلغ → حفظ

### سهولة الاستخدام
- واجهة نظيفة وبسيطة
- ألوان واضحة لكل نوع حركة:
  - أخضر للاستلام (قبض)
  - أزرق للتسليم (صرف)
- معاينة فورية للرصيد قبل الحفظ

## Technical Implementation

### Files Modified
1. `components/QuickAddMovementSheet.tsx` - مكون Bottom Sheet الجديد
2. `app/customer-details.tsx` - دمج المكون في صفحة العميل

### Key Features
- استخدام AsyncStorage لحفظ آخر عملة
- معاينة الرصيد في الوقت الفعلي
- دعم لوحة المفاتيح
- التحقق من صحة البيانات
- رسائل خطأ واضحة

## Next Steps
يمكن إضافة تحسينات مستقبلية مثل:
- منع الرصيد السالب (خيار في الإعدادات)
- اختصارات لمبالغ شائعة
- تاريخ الإضافة اليدوي
